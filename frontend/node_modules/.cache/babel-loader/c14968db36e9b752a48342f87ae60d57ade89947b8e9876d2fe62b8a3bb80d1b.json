{"ast":null,"code":"function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction _defineProperty(e, r, t) {\n  return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : i + \"\";\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nimport * as React from 'react';\nimport { Children, PureComponent, useCallback, useContext, useEffect } from 'react';\nimport { clsx } from 'clsx';\nimport { scalePoint } from 'victory-vendor/d3-scale';\nimport range from 'es-toolkit/compat/range';\nimport { Layer } from '../container/Layer';\nimport { Text } from '../component/Text';\nimport { getValueByDataKey } from '../util/ChartUtils';\nimport { isNumber, isNotNil } from '../util/DataUtils';\nimport { generatePrefixStyle } from '../util/CssPrefixUtils';\nimport { useChartData, useDataIndex } from '../context/chartDataContext';\nimport { BrushUpdateDispatchContext } from '../context/brushUpdateContext';\nimport { useAppDispatch, useAppSelector } from '../state/hooks';\nimport { setDataStartEndIndexes } from '../state/chartDataSlice';\nimport { setBrushSettings } from '../state/brushSlice';\nimport { PanoramaContextProvider } from '../context/PanoramaContext';\nimport { selectBrushDimensions } from '../state/selectors/brushSelectors';\nimport { useBrushChartSynchronisation } from '../synchronisation/useChartSynchronisation';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nimport { svgPropertiesNoEvents } from '../util/svgPropertiesNoEvents';\n\n// Why is this tickFormatter different from the other TickFormatters? This one allows to return numbers too for some reason.\n\nfunction DefaultTraveller(props) {\n  var {\n    x,\n    y,\n    width,\n    height,\n    stroke\n  } = props;\n  var lineY = Math.floor(y + height / 2) - 1;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"rect\", {\n    x: x,\n    y: y,\n    width: width,\n    height: height,\n    fill: stroke,\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    x1: x + 1,\n    y1: lineY,\n    x2: x + width - 1,\n    y2: lineY,\n    fill: \"none\",\n    stroke: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    x1: x + 1,\n    y1: lineY + 2,\n    x2: x + width - 1,\n    y2: lineY + 2,\n    fill: \"none\",\n    stroke: \"#fff\"\n  }));\n}\nfunction Traveller(props) {\n  var {\n    travellerProps,\n    travellerType\n  } = props;\n  if (/*#__PURE__*/React.isValidElement(travellerType)) {\n    // @ts-expect-error element cloning disagrees with the types (and it should)\n    return /*#__PURE__*/React.cloneElement(travellerType, travellerProps);\n  }\n  if (typeof travellerType === 'function') {\n    return travellerType(travellerProps);\n  }\n  return /*#__PURE__*/React.createElement(DefaultTraveller, travellerProps);\n}\nfunction getNameFromUnknown(value) {\n  if (isNotNil(value) && typeof value === 'object' && 'name' in value && typeof value.name === 'string') {\n    return value.name;\n  }\n  return undefined;\n}\nfunction getAriaLabel(data, startIndex, endIndex) {\n  var start = getNameFromUnknown(data[startIndex]);\n  var end = getNameFromUnknown(data[endIndex]);\n  return \"Min value: \".concat(start, \", Max value: \").concat(end);\n}\nfunction TravellerLayer(_ref) {\n  var {\n    otherProps,\n    travellerX,\n    id,\n    onMouseEnter,\n    onMouseLeave,\n    onMouseDown,\n    onTouchStart,\n    onTravellerMoveKeyboard,\n    onFocus,\n    onBlur\n  } = _ref;\n  var {\n    y,\n    x: xFromProps,\n    travellerWidth,\n    height,\n    traveller,\n    ariaLabel,\n    data,\n    startIndex,\n    endIndex\n  } = otherProps;\n  var x = Math.max(travellerX, xFromProps);\n  var travellerProps = _objectSpread(_objectSpread({}, svgPropertiesNoEvents(otherProps)), {}, {\n    x,\n    y,\n    width: travellerWidth,\n    height\n  });\n  var ariaLabelBrush = ariaLabel || getAriaLabel(data, startIndex, endIndex);\n  return /*#__PURE__*/React.createElement(Layer, {\n    tabIndex: 0,\n    role: \"slider\",\n    \"aria-label\": ariaLabelBrush,\n    \"aria-valuenow\": travellerX,\n    className: \"recharts-brush-traveller\",\n    onMouseEnter: onMouseEnter,\n    onMouseLeave: onMouseLeave,\n    onMouseDown: onMouseDown,\n    onTouchStart: onTouchStart,\n    onKeyDown: e => {\n      if (!['ArrowLeft', 'ArrowRight'].includes(e.key)) {\n        return;\n      }\n      e.preventDefault();\n      e.stopPropagation();\n      onTravellerMoveKeyboard(e.key === 'ArrowRight' ? 1 : -1, id);\n    },\n    onFocus: onFocus,\n    onBlur: onBlur,\n    style: {\n      cursor: 'col-resize'\n    }\n  }, /*#__PURE__*/React.createElement(Traveller, {\n    travellerType: traveller,\n    travellerProps: travellerProps\n  }));\n}\n/*\n * This one cannot be a React Component because React is not happy with it returning only string | number.\n * React wants a full React.JSX.Element but that is not compatible with Text component.\n */\nfunction getTextOfTick(props) {\n  var {\n    index,\n    data,\n    tickFormatter,\n    dataKey\n  } = props;\n  // @ts-expect-error getValueByDataKey does not validate the output type\n  var text = getValueByDataKey(data[index], dataKey, index);\n  return typeof tickFormatter === 'function' ? tickFormatter(text, index) : text;\n}\nfunction getIndexInRange(valueRange, x) {\n  var len = valueRange.length;\n  var start = 0;\n  var end = len - 1;\n  while (end - start > 1) {\n    var middle = Math.floor((start + end) / 2);\n    var middleValue = valueRange[middle];\n    if (middleValue != null && middleValue > x) {\n      end = middle;\n    } else {\n      start = middle;\n    }\n  }\n  var endValue = valueRange[end];\n  return endValue != null && x >= endValue ? end : start;\n}\nfunction getIndex(_ref2) {\n  var {\n    startX,\n    endX,\n    scaleValues,\n    gap,\n    data\n  } = _ref2;\n  var lastIndex = data.length - 1;\n  var min = Math.min(startX, endX);\n  var max = Math.max(startX, endX);\n  var minIndex = getIndexInRange(scaleValues, min);\n  var maxIndex = getIndexInRange(scaleValues, max);\n  return {\n    startIndex: minIndex - minIndex % gap,\n    endIndex: maxIndex === lastIndex ? lastIndex : maxIndex - maxIndex % gap\n  };\n}\nfunction Background(_ref3) {\n  var {\n    x,\n    y,\n    width,\n    height,\n    fill,\n    stroke\n  } = _ref3;\n  return /*#__PURE__*/React.createElement(\"rect\", {\n    stroke: stroke,\n    fill: fill,\n    x: x,\n    y: y,\n    width: width,\n    height: height\n  });\n}\nfunction BrushText(_ref4) {\n  var {\n    startIndex,\n    endIndex,\n    y,\n    height,\n    travellerWidth,\n    stroke,\n    tickFormatter,\n    dataKey,\n    data,\n    startX,\n    endX\n  } = _ref4;\n  var offset = 5;\n  var attrs = {\n    pointerEvents: 'none',\n    fill: stroke\n  };\n  return /*#__PURE__*/React.createElement(Layer, {\n    className: \"recharts-brush-texts\"\n  }, /*#__PURE__*/React.createElement(Text, _extends({\n    textAnchor: \"end\",\n    verticalAnchor: \"middle\",\n    x: Math.min(startX, endX) - offset,\n    y: y + height / 2\n  }, attrs), getTextOfTick({\n    index: startIndex,\n    tickFormatter,\n    dataKey,\n    data\n  })), /*#__PURE__*/React.createElement(Text, _extends({\n    textAnchor: \"start\",\n    verticalAnchor: \"middle\",\n    x: Math.max(startX, endX) + travellerWidth + offset,\n    y: y + height / 2\n  }, attrs), getTextOfTick({\n    index: endIndex,\n    tickFormatter,\n    dataKey,\n    data\n  })));\n}\nfunction Slide(_ref5) {\n  var {\n    y,\n    height,\n    stroke,\n    travellerWidth,\n    startX,\n    endX,\n    onMouseEnter,\n    onMouseLeave,\n    onMouseDown,\n    onTouchStart\n  } = _ref5;\n  var x = Math.min(startX, endX) + travellerWidth;\n  var width = Math.max(Math.abs(endX - startX) - travellerWidth, 0);\n  return /*#__PURE__*/React.createElement(\"rect\", {\n    className: \"recharts-brush-slide\",\n    onMouseEnter: onMouseEnter,\n    onMouseLeave: onMouseLeave,\n    onMouseDown: onMouseDown,\n    onTouchStart: onTouchStart,\n    style: {\n      cursor: 'move'\n    },\n    stroke: \"none\",\n    fill: stroke,\n    fillOpacity: 0.2,\n    x: x,\n    y: y,\n    width: width,\n    height: height\n  });\n}\nfunction Panorama(_ref6) {\n  var {\n    x,\n    y,\n    width,\n    height,\n    data,\n    children,\n    padding\n  } = _ref6;\n  var isPanoramic = React.Children.count(children) === 1;\n  if (!isPanoramic) {\n    return null;\n  }\n  var chartElement = Children.only(children);\n  if (!chartElement) {\n    return null;\n  }\n  return /*#__PURE__*/React.cloneElement(chartElement, {\n    x,\n    y,\n    width,\n    height,\n    margin: padding,\n    compact: true,\n    data\n  });\n}\nvar createScale = _ref7 => {\n  var {\n    data,\n    startIndex,\n    endIndex,\n    x,\n    width,\n    travellerWidth\n  } = _ref7;\n  if (!data || !data.length) {\n    return {};\n  }\n  var len = data.length;\n  var scale = scalePoint().domain(range(0, len)).range([x, x + width - travellerWidth]);\n  var scaleValues = scale.domain().map(entry => scale(entry)).filter(isNotNil);\n  return {\n    isTextActive: false,\n    isSlideMoving: false,\n    isTravellerMoving: false,\n    isTravellerFocused: false,\n    startX: scale(startIndex),\n    endX: scale(endIndex),\n    scale,\n    scaleValues\n  };\n};\nvar isTouch = e => e.changedTouches && !!e.changedTouches.length;\nclass BrushWithState extends PureComponent {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"handleDrag\", e => {\n      if (this.leaveTimer) {\n        clearTimeout(this.leaveTimer);\n        this.leaveTimer = null;\n      }\n      if (this.state.isTravellerMoving) {\n        this.handleTravellerMove(e);\n      } else if (this.state.isSlideMoving) {\n        this.handleSlideDrag(e);\n      }\n    });\n    _defineProperty(this, \"handleTouchMove\", e => {\n      var _e$changedTouches;\n      var touch = (_e$changedTouches = e.changedTouches) === null || _e$changedTouches === void 0 ? void 0 : _e$changedTouches[0];\n      if (touch != null) {\n        this.handleDrag(touch);\n      }\n    });\n    _defineProperty(this, \"handleDragEnd\", () => {\n      this.setState({\n        isTravellerMoving: false,\n        isSlideMoving: false\n      }, () => {\n        var {\n          endIndex,\n          onDragEnd,\n          startIndex\n        } = this.props;\n        onDragEnd === null || onDragEnd === void 0 || onDragEnd({\n          endIndex,\n          startIndex\n        });\n      });\n      this.detachDragEndListener();\n    });\n    _defineProperty(this, \"handleLeaveWrapper\", () => {\n      if (this.state.isTravellerMoving || this.state.isSlideMoving) {\n        this.leaveTimer = window.setTimeout(this.handleDragEnd, this.props.leaveTimeOut);\n      }\n    });\n    _defineProperty(this, \"handleEnterSlideOrTraveller\", () => {\n      this.setState({\n        isTextActive: true\n      });\n    });\n    _defineProperty(this, \"handleLeaveSlideOrTraveller\", () => {\n      this.setState({\n        isTextActive: false\n      });\n    });\n    _defineProperty(this, \"handleSlideDragStart\", e => {\n      var event = isTouch(e) ? e.changedTouches[0] : e;\n      if (event == null) {\n        return;\n      }\n      this.setState({\n        isTravellerMoving: false,\n        isSlideMoving: true,\n        slideMoveStartX: event.pageX\n      });\n      this.attachDragEndListener();\n    });\n    _defineProperty(this, \"handleTravellerMoveKeyboard\", (direction, id) => {\n      var {\n        data,\n        gap,\n        startIndex,\n        endIndex\n      } = this.props;\n      // scaleValues are a list of coordinates. For example: [65, 250, 435, 620, 805, 990].\n      var {\n        scaleValues,\n        startX,\n        endX\n      } = this.state;\n      if (scaleValues == null) {\n        return;\n      }\n\n      // unless we search for the closest scaleValue to the current coordinate\n      // we need to move travelers via index when using the keyboard\n      var currentIndex = -1;\n      if (id === 'startX') {\n        currentIndex = startIndex;\n      } else if (id === 'endX') {\n        currentIndex = endIndex;\n      }\n      if (currentIndex < 0 || currentIndex >= data.length) {\n        return;\n      }\n      var newIndex = currentIndex + direction;\n      if (newIndex === -1 || newIndex >= scaleValues.length) {\n        return;\n      }\n      var newScaleValue = scaleValues[newIndex];\n      if (newScaleValue == null) {\n        return;\n      }\n\n      // Prevent travellers from being on top of each other or overlapping\n      if (id === 'startX' && newScaleValue >= endX || id === 'endX' && newScaleValue <= startX) {\n        return;\n      }\n      this.setState(\n      // @ts-expect-error not sure why typescript is not happy with this, partial update is fine in React\n      {\n        [id]: newScaleValue\n      }, () => {\n        this.props.onChange(getIndex({\n          startX: this.state.startX,\n          endX: this.state.endX,\n          data,\n          gap,\n          scaleValues\n        }));\n      });\n    });\n    this.travellerDragStartHandlers = {\n      startX: this.handleTravellerDragStart.bind(this, 'startX'),\n      endX: this.handleTravellerDragStart.bind(this, 'endX')\n    };\n    this.state = {\n      brushMoveStartX: 0,\n      movingTravellerId: undefined,\n      endX: 0,\n      startX: 0,\n      slideMoveStartX: 0\n    };\n  }\n  static getDerivedStateFromProps(nextProps, prevState) {\n    var {\n      data,\n      width,\n      x,\n      travellerWidth,\n      startIndex,\n      endIndex,\n      startIndexControlledFromProps,\n      endIndexControlledFromProps\n    } = nextProps;\n    if (data !== prevState.prevData) {\n      return _objectSpread({\n        prevData: data,\n        prevTravellerWidth: travellerWidth,\n        prevX: x,\n        prevWidth: width\n      }, data && data.length ? createScale({\n        data,\n        width,\n        x,\n        travellerWidth,\n        startIndex,\n        endIndex\n      }) : {\n        scale: undefined,\n        scaleValues: undefined\n      });\n    }\n    var prevScale = prevState.scale;\n    if (prevScale && (width !== prevState.prevWidth || x !== prevState.prevX || travellerWidth !== prevState.prevTravellerWidth)) {\n      prevScale.range([x, x + width - travellerWidth]);\n      var scaleValues = prevScale.domain().map(entry => prevScale(entry)).filter(value => value != null);\n      return {\n        prevData: data,\n        prevTravellerWidth: travellerWidth,\n        prevX: x,\n        prevWidth: width,\n        startX: prevScale(nextProps.startIndex),\n        endX: prevScale(nextProps.endIndex),\n        scaleValues\n      };\n    }\n    if (prevState.scale && !prevState.isSlideMoving && !prevState.isTravellerMoving && !prevState.isTravellerFocused && !prevState.isTextActive) {\n      /*\n       * If the startIndex or endIndex are controlled from the outside,\n       * we need to keep the startX and end up to date.\n       * Also we do not want to do that while user is interacting in the brush,\n       * because this will trigger re-render and interrupt the drag&drop.\n       */\n      if (startIndexControlledFromProps != null && prevState.prevStartIndexControlledFromProps !== startIndexControlledFromProps) {\n        return {\n          startX: prevState.scale(startIndexControlledFromProps),\n          prevStartIndexControlledFromProps: startIndexControlledFromProps\n        };\n      }\n      if (endIndexControlledFromProps != null && prevState.prevEndIndexControlledFromProps !== endIndexControlledFromProps) {\n        return {\n          endX: prevState.scale(endIndexControlledFromProps),\n          prevEndIndexControlledFromProps: endIndexControlledFromProps\n        };\n      }\n    }\n    return null;\n  }\n  componentWillUnmount() {\n    if (this.leaveTimer) {\n      clearTimeout(this.leaveTimer);\n      this.leaveTimer = null;\n    }\n    this.detachDragEndListener();\n  }\n  attachDragEndListener() {\n    window.addEventListener('mouseup', this.handleDragEnd, true);\n    window.addEventListener('touchend', this.handleDragEnd, true);\n    window.addEventListener('mousemove', this.handleDrag, true);\n  }\n  detachDragEndListener() {\n    window.removeEventListener('mouseup', this.handleDragEnd, true);\n    window.removeEventListener('touchend', this.handleDragEnd, true);\n    window.removeEventListener('mousemove', this.handleDrag, true);\n  }\n  handleSlideDrag(e) {\n    var {\n      slideMoveStartX,\n      startX,\n      endX,\n      scaleValues\n    } = this.state;\n    if (scaleValues == null) {\n      return;\n    }\n    var {\n      x,\n      width,\n      travellerWidth,\n      startIndex,\n      endIndex,\n      onChange,\n      data,\n      gap\n    } = this.props;\n    var delta = e.pageX - slideMoveStartX;\n    if (delta > 0) {\n      delta = Math.min(delta, x + width - travellerWidth - endX, x + width - travellerWidth - startX);\n    } else if (delta < 0) {\n      delta = Math.max(delta, x - startX, x - endX);\n    }\n    var newIndex = getIndex({\n      startX: startX + delta,\n      endX: endX + delta,\n      data,\n      gap,\n      scaleValues\n    });\n    if ((newIndex.startIndex !== startIndex || newIndex.endIndex !== endIndex) && onChange) {\n      onChange(newIndex);\n    }\n    this.setState({\n      startX: startX + delta,\n      endX: endX + delta,\n      slideMoveStartX: e.pageX\n    });\n  }\n  handleTravellerDragStart(id, e) {\n    var event = isTouch(e) ? e.changedTouches[0] : e;\n    if (event == null) {\n      return;\n    }\n    this.setState({\n      isSlideMoving: false,\n      isTravellerMoving: true,\n      movingTravellerId: id,\n      brushMoveStartX: event.pageX\n    });\n    this.attachDragEndListener();\n  }\n  handleTravellerMove(e) {\n    var {\n      brushMoveStartX,\n      movingTravellerId,\n      endX,\n      startX,\n      scaleValues\n    } = this.state;\n    if (movingTravellerId == null || scaleValues == null) {\n      return;\n    }\n    var prevValue = this.state[movingTravellerId];\n    var {\n      x,\n      width,\n      travellerWidth,\n      onChange,\n      gap,\n      data\n    } = this.props;\n    var params = {\n      startX: this.state.startX,\n      endX: this.state.endX,\n      data,\n      gap,\n      scaleValues\n    };\n    var delta = e.pageX - brushMoveStartX;\n    if (delta > 0) {\n      delta = Math.min(delta, x + width - travellerWidth - prevValue);\n    } else if (delta < 0) {\n      delta = Math.max(delta, x - prevValue);\n    }\n    params[movingTravellerId] = prevValue + delta;\n    var newIndex = getIndex(params);\n    var {\n      startIndex,\n      endIndex\n    } = newIndex;\n    var isFullGap = () => {\n      var lastIndex = data.length - 1;\n      if (movingTravellerId === 'startX' && (endX > startX ? startIndex % gap === 0 : endIndex % gap === 0) || endX < startX && endIndex === lastIndex || movingTravellerId === 'endX' && (endX > startX ? endIndex % gap === 0 : startIndex % gap === 0) || endX > startX && endIndex === lastIndex) {\n        return true;\n      }\n      return false;\n    };\n    this.setState(\n    // @ts-expect-error not sure why typescript is not happy with this, partial update is fine in React\n    {\n      [movingTravellerId]: prevValue + delta,\n      brushMoveStartX: e.pageX\n    }, () => {\n      if (onChange) {\n        if (isFullGap()) {\n          onChange(newIndex);\n        }\n      }\n    });\n  }\n  render() {\n    var {\n      data,\n      className,\n      children,\n      x,\n      y,\n      dy,\n      width,\n      height,\n      alwaysShowText,\n      fill,\n      stroke,\n      startIndex,\n      endIndex,\n      travellerWidth,\n      tickFormatter,\n      dataKey,\n      padding\n    } = this.props;\n    var {\n      startX,\n      endX,\n      isTextActive,\n      isSlideMoving,\n      isTravellerMoving,\n      isTravellerFocused\n    } = this.state;\n    if (!data || !data.length || !isNumber(x) || !isNumber(y) || !isNumber(width) || !isNumber(height) || width <= 0 || height <= 0) {\n      return null;\n    }\n    var layerClass = clsx('recharts-brush', className);\n    var style = generatePrefixStyle('userSelect', 'none');\n    var calculatedY = y + (dy !== null && dy !== void 0 ? dy : 0);\n    return /*#__PURE__*/React.createElement(Layer, {\n      className: layerClass,\n      onMouseLeave: this.handleLeaveWrapper,\n      onTouchMove: this.handleTouchMove,\n      style: style\n    }, /*#__PURE__*/React.createElement(Background, {\n      x: x,\n      y: calculatedY,\n      width: width,\n      height: height,\n      fill: fill,\n      stroke: stroke\n    }), /*#__PURE__*/React.createElement(PanoramaContextProvider, null, /*#__PURE__*/React.createElement(Panorama, {\n      x: x,\n      y: calculatedY,\n      width: width,\n      height: height,\n      data: data,\n      padding: padding\n    }, children)), /*#__PURE__*/React.createElement(Slide, {\n      y: calculatedY,\n      height: height,\n      stroke: stroke,\n      travellerWidth: travellerWidth,\n      startX: startX,\n      endX: endX,\n      onMouseEnter: this.handleEnterSlideOrTraveller,\n      onMouseLeave: this.handleLeaveSlideOrTraveller,\n      onMouseDown: this.handleSlideDragStart,\n      onTouchStart: this.handleSlideDragStart\n    }), /*#__PURE__*/React.createElement(TravellerLayer, {\n      travellerX: startX,\n      id: \"startX\",\n      otherProps: _objectSpread(_objectSpread({}, this.props), {}, {\n        y: calculatedY\n      }),\n      onMouseEnter: this.handleEnterSlideOrTraveller,\n      onMouseLeave: this.handleLeaveSlideOrTraveller,\n      onMouseDown: this.travellerDragStartHandlers.startX,\n      onTouchStart: this.travellerDragStartHandlers.startX,\n      onTravellerMoveKeyboard: this.handleTravellerMoveKeyboard,\n      onFocus: () => {\n        this.setState({\n          isTravellerFocused: true\n        });\n      },\n      onBlur: () => {\n        this.setState({\n          isTravellerFocused: false\n        });\n      }\n    }), /*#__PURE__*/React.createElement(TravellerLayer, {\n      travellerX: endX,\n      id: \"endX\",\n      otherProps: _objectSpread(_objectSpread({}, this.props), {}, {\n        y: calculatedY\n      }),\n      onMouseEnter: this.handleEnterSlideOrTraveller,\n      onMouseLeave: this.handleLeaveSlideOrTraveller,\n      onMouseDown: this.travellerDragStartHandlers.endX,\n      onTouchStart: this.travellerDragStartHandlers.endX,\n      onTravellerMoveKeyboard: this.handleTravellerMoveKeyboard,\n      onFocus: () => {\n        this.setState({\n          isTravellerFocused: true\n        });\n      },\n      onBlur: () => {\n        this.setState({\n          isTravellerFocused: false\n        });\n      }\n    }), (isTextActive || isSlideMoving || isTravellerMoving || isTravellerFocused || alwaysShowText) && /*#__PURE__*/React.createElement(BrushText, {\n      startIndex: startIndex,\n      endIndex: endIndex,\n      y: calculatedY,\n      height: height,\n      travellerWidth: travellerWidth,\n      stroke: stroke,\n      tickFormatter: tickFormatter,\n      dataKey: dataKey,\n      data: data,\n      startX: startX,\n      endX: endX\n    }));\n  }\n}\nfunction BrushInternal(props) {\n  var dispatch = useAppDispatch();\n  var chartData = useChartData();\n  var dataIndexes = useDataIndex();\n  var onChangeFromContext = useContext(BrushUpdateDispatchContext);\n  var onChangeFromProps = props.onChange;\n  var {\n    startIndex: startIndexFromProps,\n    endIndex: endIndexFromProps\n  } = props;\n  useEffect(() => {\n    // start and end index can be controlled from props, and we need them to stay up-to-date in the Redux state too\n    dispatch(setDataStartEndIndexes({\n      startIndex: startIndexFromProps,\n      endIndex: endIndexFromProps\n    }));\n  }, [dispatch, endIndexFromProps, startIndexFromProps]);\n  useBrushChartSynchronisation();\n  var onChange = useCallback(nextState => {\n    if (dataIndexes == null) {\n      return;\n    }\n    var {\n      startIndex,\n      endIndex\n    } = dataIndexes;\n    if (nextState.startIndex !== startIndex || nextState.endIndex !== endIndex) {\n      onChangeFromContext === null || onChangeFromContext === void 0 || onChangeFromContext(nextState);\n      onChangeFromProps === null || onChangeFromProps === void 0 || onChangeFromProps(nextState);\n      dispatch(setDataStartEndIndexes(nextState));\n    }\n  }, [onChangeFromProps, onChangeFromContext, dispatch, dataIndexes]);\n  var brushDimensions = useAppSelector(selectBrushDimensions);\n  if (brushDimensions == null || dataIndexes == null || chartData == null || !chartData.length) {\n    return null;\n  }\n  var {\n    startIndex,\n    endIndex\n  } = dataIndexes;\n  var {\n    x,\n    y,\n    width\n  } = brushDimensions;\n  var contextProperties = {\n    data: chartData,\n    x,\n    y,\n    width,\n    startIndex,\n    endIndex,\n    onChange\n  };\n  return /*#__PURE__*/React.createElement(BrushWithState, _extends({}, props, contextProperties, {\n    startIndexControlledFromProps: startIndexFromProps !== null && startIndexFromProps !== void 0 ? startIndexFromProps : undefined,\n    endIndexControlledFromProps: endIndexFromProps !== null && endIndexFromProps !== void 0 ? endIndexFromProps : undefined\n  }));\n}\nfunction BrushSettingsDispatcher(props) {\n  var dispatch = useAppDispatch();\n  useEffect(() => {\n    dispatch(setBrushSettings(props));\n    return () => {\n      dispatch(setBrushSettings(null));\n    };\n  }, [dispatch, props]);\n  return null;\n}\nexport var defaultBrushProps = {\n  height: 40,\n  travellerWidth: 5,\n  gap: 1,\n  fill: '#fff',\n  stroke: '#666',\n  padding: {\n    top: 1,\n    right: 1,\n    bottom: 1,\n    left: 1\n  },\n  leaveTimeOut: 1000,\n  alwaysShowText: false\n};\n\n/**\n * Renders a scrollbar that allows the user to zoom and pan in the chart along its XAxis.\n * It also allows you to render a small overview of the chart inside the brush that is always visible\n * and shows the full data set so that the user can see where they are zoomed in.\n *\n * If a chart is synchronized with other charts using the `syncId` prop on the chart,\n * the brush will also synchronize the zooming and panning between all synchronized charts.\n *\n * @see {@link https://recharts.github.io/en-US/examples/BrushBarChart/ BarChart with Brush}\n * @see {@link https://recharts.github.io/en-US/examples/SynchronizedLineChart/ Synchronized Brush}\n *\n * @consumes CartesianChartContext\n */\nexport function Brush(outsideProps) {\n  var props = resolveDefaultProps(outsideProps, defaultBrushProps);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(BrushSettingsDispatcher, {\n    height: props.height,\n    x: props.x,\n    y: props.y,\n    width: props.width,\n    padding: props.padding\n  }), /*#__PURE__*/React.createElement(BrushInternal, props));\n}\nBrush.displayName = 'Brush';","map":{"version":3,"names":["_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","ownKeys","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","React","Children","PureComponent","useCallback","useContext","useEffect","clsx","scalePoint","range","Layer","Text","getValueByDataKey","isNumber","isNotNil","generatePrefixStyle","useChartData","useDataIndex","BrushUpdateDispatchContext","useAppDispatch","useAppSelector","setDataStartEndIndexes","setBrushSettings","PanoramaContextProvider","selectBrushDimensions","useBrushChartSynchronisation","resolveDefaultProps","svgPropertiesNoEvents","DefaultTraveller","props","x","y","width","height","stroke","lineY","Math","floor","createElement","Fragment","fill","x1","y1","x2","y2","Traveller","travellerProps","travellerType","isValidElement","cloneElement","getNameFromUnknown","name","undefined","getAriaLabel","data","startIndex","endIndex","start","end","concat","TravellerLayer","_ref","otherProps","travellerX","id","onMouseEnter","onMouseLeave","onMouseDown","onTouchStart","onTravellerMoveKeyboard","onFocus","onBlur","xFromProps","travellerWidth","traveller","ariaLabel","max","ariaLabelBrush","tabIndex","role","className","onKeyDown","includes","key","preventDefault","stopPropagation","style","cursor","getTextOfTick","index","tickFormatter","dataKey","text","getIndexInRange","valueRange","len","middle","middleValue","endValue","getIndex","_ref2","startX","endX","scaleValues","gap","lastIndex","min","minIndex","maxIndex","Background","_ref3","BrushText","_ref4","offset","attrs","pointerEvents","textAnchor","verticalAnchor","Slide","_ref5","abs","fillOpacity","Panorama","_ref6","children","padding","isPanoramic","count","chartElement","only","margin","compact","createScale","_ref7","scale","domain","map","entry","isTextActive","isSlideMoving","isTravellerMoving","isTravellerFocused","isTouch","changedTouches","BrushWithState","constructor","leaveTimer","clearTimeout","state","handleTravellerMove","handleSlideDrag","_e$changedTouches","touch","handleDrag","setState","onDragEnd","detachDragEndListener","window","setTimeout","handleDragEnd","leaveTimeOut","event","slideMoveStartX","pageX","attachDragEndListener","direction","currentIndex","newIndex","newScaleValue","onChange","travellerDragStartHandlers","handleTravellerDragStart","brushMoveStartX","movingTravellerId","getDerivedStateFromProps","nextProps","prevState","startIndexControlledFromProps","endIndexControlledFromProps","prevData","prevTravellerWidth","prevX","prevWidth","prevScale","prevStartIndexControlledFromProps","prevEndIndexControlledFromProps","componentWillUnmount","addEventListener","removeEventListener","delta","prevValue","params","isFullGap","render","dy","alwaysShowText","layerClass","calculatedY","handleLeaveWrapper","onTouchMove","handleTouchMove","handleEnterSlideOrTraveller","handleLeaveSlideOrTraveller","handleSlideDragStart","handleTravellerMoveKeyboard","BrushInternal","dispatch","chartData","dataIndexes","onChangeFromContext","onChangeFromProps","startIndexFromProps","endIndexFromProps","nextState","brushDimensions","contextProperties","BrushSettingsDispatcher","defaultBrushProps","top","right","bottom","left","Brush","outsideProps","displayName"],"sources":["C:/Users/Alex/OneDrive/Documents/Projects/Financial Planner/frontend/node_modules/recharts/es6/cartesian/Brush.js"],"sourcesContent":["function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport * as React from 'react';\nimport { Children, PureComponent, useCallback, useContext, useEffect } from 'react';\nimport { clsx } from 'clsx';\nimport { scalePoint } from 'victory-vendor/d3-scale';\nimport range from 'es-toolkit/compat/range';\nimport { Layer } from '../container/Layer';\nimport { Text } from '../component/Text';\nimport { getValueByDataKey } from '../util/ChartUtils';\nimport { isNumber, isNotNil } from '../util/DataUtils';\nimport { generatePrefixStyle } from '../util/CssPrefixUtils';\nimport { useChartData, useDataIndex } from '../context/chartDataContext';\nimport { BrushUpdateDispatchContext } from '../context/brushUpdateContext';\nimport { useAppDispatch, useAppSelector } from '../state/hooks';\nimport { setDataStartEndIndexes } from '../state/chartDataSlice';\nimport { setBrushSettings } from '../state/brushSlice';\nimport { PanoramaContextProvider } from '../context/PanoramaContext';\nimport { selectBrushDimensions } from '../state/selectors/brushSelectors';\nimport { useBrushChartSynchronisation } from '../synchronisation/useChartSynchronisation';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nimport { svgPropertiesNoEvents } from '../util/svgPropertiesNoEvents';\n\n// Why is this tickFormatter different from the other TickFormatters? This one allows to return numbers too for some reason.\n\nfunction DefaultTraveller(props) {\n  var {\n    x,\n    y,\n    width,\n    height,\n    stroke\n  } = props;\n  var lineY = Math.floor(y + height / 2) - 1;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"rect\", {\n    x: x,\n    y: y,\n    width: width,\n    height: height,\n    fill: stroke,\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    x1: x + 1,\n    y1: lineY,\n    x2: x + width - 1,\n    y2: lineY,\n    fill: \"none\",\n    stroke: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    x1: x + 1,\n    y1: lineY + 2,\n    x2: x + width - 1,\n    y2: lineY + 2,\n    fill: \"none\",\n    stroke: \"#fff\"\n  }));\n}\nfunction Traveller(props) {\n  var {\n    travellerProps,\n    travellerType\n  } = props;\n  if (/*#__PURE__*/React.isValidElement(travellerType)) {\n    // @ts-expect-error element cloning disagrees with the types (and it should)\n    return /*#__PURE__*/React.cloneElement(travellerType, travellerProps);\n  }\n  if (typeof travellerType === 'function') {\n    return travellerType(travellerProps);\n  }\n  return /*#__PURE__*/React.createElement(DefaultTraveller, travellerProps);\n}\nfunction getNameFromUnknown(value) {\n  if (isNotNil(value) && typeof value === 'object' && 'name' in value && typeof value.name === 'string') {\n    return value.name;\n  }\n  return undefined;\n}\nfunction getAriaLabel(data, startIndex, endIndex) {\n  var start = getNameFromUnknown(data[startIndex]);\n  var end = getNameFromUnknown(data[endIndex]);\n  return \"Min value: \".concat(start, \", Max value: \").concat(end);\n}\nfunction TravellerLayer(_ref) {\n  var {\n    otherProps,\n    travellerX,\n    id,\n    onMouseEnter,\n    onMouseLeave,\n    onMouseDown,\n    onTouchStart,\n    onTravellerMoveKeyboard,\n    onFocus,\n    onBlur\n  } = _ref;\n  var {\n    y,\n    x: xFromProps,\n    travellerWidth,\n    height,\n    traveller,\n    ariaLabel,\n    data,\n    startIndex,\n    endIndex\n  } = otherProps;\n  var x = Math.max(travellerX, xFromProps);\n  var travellerProps = _objectSpread(_objectSpread({}, svgPropertiesNoEvents(otherProps)), {}, {\n    x,\n    y,\n    width: travellerWidth,\n    height\n  });\n  var ariaLabelBrush = ariaLabel || getAriaLabel(data, startIndex, endIndex);\n  return /*#__PURE__*/React.createElement(Layer, {\n    tabIndex: 0,\n    role: \"slider\",\n    \"aria-label\": ariaLabelBrush,\n    \"aria-valuenow\": travellerX,\n    className: \"recharts-brush-traveller\",\n    onMouseEnter: onMouseEnter,\n    onMouseLeave: onMouseLeave,\n    onMouseDown: onMouseDown,\n    onTouchStart: onTouchStart,\n    onKeyDown: e => {\n      if (!['ArrowLeft', 'ArrowRight'].includes(e.key)) {\n        return;\n      }\n      e.preventDefault();\n      e.stopPropagation();\n      onTravellerMoveKeyboard(e.key === 'ArrowRight' ? 1 : -1, id);\n    },\n    onFocus: onFocus,\n    onBlur: onBlur,\n    style: {\n      cursor: 'col-resize'\n    }\n  }, /*#__PURE__*/React.createElement(Traveller, {\n    travellerType: traveller,\n    travellerProps: travellerProps\n  }));\n}\n/*\n * This one cannot be a React Component because React is not happy with it returning only string | number.\n * React wants a full React.JSX.Element but that is not compatible with Text component.\n */\nfunction getTextOfTick(props) {\n  var {\n    index,\n    data,\n    tickFormatter,\n    dataKey\n  } = props;\n  // @ts-expect-error getValueByDataKey does not validate the output type\n  var text = getValueByDataKey(data[index], dataKey, index);\n  return typeof tickFormatter === 'function' ? tickFormatter(text, index) : text;\n}\nfunction getIndexInRange(valueRange, x) {\n  var len = valueRange.length;\n  var start = 0;\n  var end = len - 1;\n  while (end - start > 1) {\n    var middle = Math.floor((start + end) / 2);\n    var middleValue = valueRange[middle];\n    if (middleValue != null && middleValue > x) {\n      end = middle;\n    } else {\n      start = middle;\n    }\n  }\n  var endValue = valueRange[end];\n  return endValue != null && x >= endValue ? end : start;\n}\nfunction getIndex(_ref2) {\n  var {\n    startX,\n    endX,\n    scaleValues,\n    gap,\n    data\n  } = _ref2;\n  var lastIndex = data.length - 1;\n  var min = Math.min(startX, endX);\n  var max = Math.max(startX, endX);\n  var minIndex = getIndexInRange(scaleValues, min);\n  var maxIndex = getIndexInRange(scaleValues, max);\n  return {\n    startIndex: minIndex - minIndex % gap,\n    endIndex: maxIndex === lastIndex ? lastIndex : maxIndex - maxIndex % gap\n  };\n}\nfunction Background(_ref3) {\n  var {\n    x,\n    y,\n    width,\n    height,\n    fill,\n    stroke\n  } = _ref3;\n  return /*#__PURE__*/React.createElement(\"rect\", {\n    stroke: stroke,\n    fill: fill,\n    x: x,\n    y: y,\n    width: width,\n    height: height\n  });\n}\nfunction BrushText(_ref4) {\n  var {\n    startIndex,\n    endIndex,\n    y,\n    height,\n    travellerWidth,\n    stroke,\n    tickFormatter,\n    dataKey,\n    data,\n    startX,\n    endX\n  } = _ref4;\n  var offset = 5;\n  var attrs = {\n    pointerEvents: 'none',\n    fill: stroke\n  };\n  return /*#__PURE__*/React.createElement(Layer, {\n    className: \"recharts-brush-texts\"\n  }, /*#__PURE__*/React.createElement(Text, _extends({\n    textAnchor: \"end\",\n    verticalAnchor: \"middle\",\n    x: Math.min(startX, endX) - offset,\n    y: y + height / 2\n  }, attrs), getTextOfTick({\n    index: startIndex,\n    tickFormatter,\n    dataKey,\n    data\n  })), /*#__PURE__*/React.createElement(Text, _extends({\n    textAnchor: \"start\",\n    verticalAnchor: \"middle\",\n    x: Math.max(startX, endX) + travellerWidth + offset,\n    y: y + height / 2\n  }, attrs), getTextOfTick({\n    index: endIndex,\n    tickFormatter,\n    dataKey,\n    data\n  })));\n}\nfunction Slide(_ref5) {\n  var {\n    y,\n    height,\n    stroke,\n    travellerWidth,\n    startX,\n    endX,\n    onMouseEnter,\n    onMouseLeave,\n    onMouseDown,\n    onTouchStart\n  } = _ref5;\n  var x = Math.min(startX, endX) + travellerWidth;\n  var width = Math.max(Math.abs(endX - startX) - travellerWidth, 0);\n  return /*#__PURE__*/React.createElement(\"rect\", {\n    className: \"recharts-brush-slide\",\n    onMouseEnter: onMouseEnter,\n    onMouseLeave: onMouseLeave,\n    onMouseDown: onMouseDown,\n    onTouchStart: onTouchStart,\n    style: {\n      cursor: 'move'\n    },\n    stroke: \"none\",\n    fill: stroke,\n    fillOpacity: 0.2,\n    x: x,\n    y: y,\n    width: width,\n    height: height\n  });\n}\nfunction Panorama(_ref6) {\n  var {\n    x,\n    y,\n    width,\n    height,\n    data,\n    children,\n    padding\n  } = _ref6;\n  var isPanoramic = React.Children.count(children) === 1;\n  if (!isPanoramic) {\n    return null;\n  }\n  var chartElement = Children.only(children);\n  if (!chartElement) {\n    return null;\n  }\n  return /*#__PURE__*/React.cloneElement(chartElement, {\n    x,\n    y,\n    width,\n    height,\n    margin: padding,\n    compact: true,\n    data\n  });\n}\nvar createScale = _ref7 => {\n  var {\n    data,\n    startIndex,\n    endIndex,\n    x,\n    width,\n    travellerWidth\n  } = _ref7;\n  if (!data || !data.length) {\n    return {};\n  }\n  var len = data.length;\n  var scale = scalePoint().domain(range(0, len)).range([x, x + width - travellerWidth]);\n  var scaleValues = scale.domain().map(entry => scale(entry)).filter(isNotNil);\n  return {\n    isTextActive: false,\n    isSlideMoving: false,\n    isTravellerMoving: false,\n    isTravellerFocused: false,\n    startX: scale(startIndex),\n    endX: scale(endIndex),\n    scale,\n    scaleValues\n  };\n};\nvar isTouch = e => e.changedTouches && !!e.changedTouches.length;\nclass BrushWithState extends PureComponent {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"handleDrag\", e => {\n      if (this.leaveTimer) {\n        clearTimeout(this.leaveTimer);\n        this.leaveTimer = null;\n      }\n      if (this.state.isTravellerMoving) {\n        this.handleTravellerMove(e);\n      } else if (this.state.isSlideMoving) {\n        this.handleSlideDrag(e);\n      }\n    });\n    _defineProperty(this, \"handleTouchMove\", e => {\n      var _e$changedTouches;\n      var touch = (_e$changedTouches = e.changedTouches) === null || _e$changedTouches === void 0 ? void 0 : _e$changedTouches[0];\n      if (touch != null) {\n        this.handleDrag(touch);\n      }\n    });\n    _defineProperty(this, \"handleDragEnd\", () => {\n      this.setState({\n        isTravellerMoving: false,\n        isSlideMoving: false\n      }, () => {\n        var {\n          endIndex,\n          onDragEnd,\n          startIndex\n        } = this.props;\n        onDragEnd === null || onDragEnd === void 0 || onDragEnd({\n          endIndex,\n          startIndex\n        });\n      });\n      this.detachDragEndListener();\n    });\n    _defineProperty(this, \"handleLeaveWrapper\", () => {\n      if (this.state.isTravellerMoving || this.state.isSlideMoving) {\n        this.leaveTimer = window.setTimeout(this.handleDragEnd, this.props.leaveTimeOut);\n      }\n    });\n    _defineProperty(this, \"handleEnterSlideOrTraveller\", () => {\n      this.setState({\n        isTextActive: true\n      });\n    });\n    _defineProperty(this, \"handleLeaveSlideOrTraveller\", () => {\n      this.setState({\n        isTextActive: false\n      });\n    });\n    _defineProperty(this, \"handleSlideDragStart\", e => {\n      var event = isTouch(e) ? e.changedTouches[0] : e;\n      if (event == null) {\n        return;\n      }\n      this.setState({\n        isTravellerMoving: false,\n        isSlideMoving: true,\n        slideMoveStartX: event.pageX\n      });\n      this.attachDragEndListener();\n    });\n    _defineProperty(this, \"handleTravellerMoveKeyboard\", (direction, id) => {\n      var {\n        data,\n        gap,\n        startIndex,\n        endIndex\n      } = this.props;\n      // scaleValues are a list of coordinates. For example: [65, 250, 435, 620, 805, 990].\n      var {\n        scaleValues,\n        startX,\n        endX\n      } = this.state;\n      if (scaleValues == null) {\n        return;\n      }\n\n      // unless we search for the closest scaleValue to the current coordinate\n      // we need to move travelers via index when using the keyboard\n      var currentIndex = -1;\n      if (id === 'startX') {\n        currentIndex = startIndex;\n      } else if (id === 'endX') {\n        currentIndex = endIndex;\n      }\n      if (currentIndex < 0 || currentIndex >= data.length) {\n        return;\n      }\n      var newIndex = currentIndex + direction;\n      if (newIndex === -1 || newIndex >= scaleValues.length) {\n        return;\n      }\n      var newScaleValue = scaleValues[newIndex];\n      if (newScaleValue == null) {\n        return;\n      }\n\n      // Prevent travellers from being on top of each other or overlapping\n      if (id === 'startX' && newScaleValue >= endX || id === 'endX' && newScaleValue <= startX) {\n        return;\n      }\n      this.setState(\n      // @ts-expect-error not sure why typescript is not happy with this, partial update is fine in React\n      {\n        [id]: newScaleValue\n      }, () => {\n        this.props.onChange(getIndex({\n          startX: this.state.startX,\n          endX: this.state.endX,\n          data,\n          gap,\n          scaleValues\n        }));\n      });\n    });\n    this.travellerDragStartHandlers = {\n      startX: this.handleTravellerDragStart.bind(this, 'startX'),\n      endX: this.handleTravellerDragStart.bind(this, 'endX')\n    };\n    this.state = {\n      brushMoveStartX: 0,\n      movingTravellerId: undefined,\n      endX: 0,\n      startX: 0,\n      slideMoveStartX: 0\n    };\n  }\n  static getDerivedStateFromProps(nextProps, prevState) {\n    var {\n      data,\n      width,\n      x,\n      travellerWidth,\n      startIndex,\n      endIndex,\n      startIndexControlledFromProps,\n      endIndexControlledFromProps\n    } = nextProps;\n    if (data !== prevState.prevData) {\n      return _objectSpread({\n        prevData: data,\n        prevTravellerWidth: travellerWidth,\n        prevX: x,\n        prevWidth: width\n      }, data && data.length ? createScale({\n        data,\n        width,\n        x,\n        travellerWidth,\n        startIndex,\n        endIndex\n      }) : {\n        scale: undefined,\n        scaleValues: undefined\n      });\n    }\n    var prevScale = prevState.scale;\n    if (prevScale && (width !== prevState.prevWidth || x !== prevState.prevX || travellerWidth !== prevState.prevTravellerWidth)) {\n      prevScale.range([x, x + width - travellerWidth]);\n      var scaleValues = prevScale.domain().map(entry => prevScale(entry)).filter(value => value != null);\n      return {\n        prevData: data,\n        prevTravellerWidth: travellerWidth,\n        prevX: x,\n        prevWidth: width,\n        startX: prevScale(nextProps.startIndex),\n        endX: prevScale(nextProps.endIndex),\n        scaleValues\n      };\n    }\n    if (prevState.scale && !prevState.isSlideMoving && !prevState.isTravellerMoving && !prevState.isTravellerFocused && !prevState.isTextActive) {\n      /*\n       * If the startIndex or endIndex are controlled from the outside,\n       * we need to keep the startX and end up to date.\n       * Also we do not want to do that while user is interacting in the brush,\n       * because this will trigger re-render and interrupt the drag&drop.\n       */\n      if (startIndexControlledFromProps != null && prevState.prevStartIndexControlledFromProps !== startIndexControlledFromProps) {\n        return {\n          startX: prevState.scale(startIndexControlledFromProps),\n          prevStartIndexControlledFromProps: startIndexControlledFromProps\n        };\n      }\n      if (endIndexControlledFromProps != null && prevState.prevEndIndexControlledFromProps !== endIndexControlledFromProps) {\n        return {\n          endX: prevState.scale(endIndexControlledFromProps),\n          prevEndIndexControlledFromProps: endIndexControlledFromProps\n        };\n      }\n    }\n    return null;\n  }\n  componentWillUnmount() {\n    if (this.leaveTimer) {\n      clearTimeout(this.leaveTimer);\n      this.leaveTimer = null;\n    }\n    this.detachDragEndListener();\n  }\n  attachDragEndListener() {\n    window.addEventListener('mouseup', this.handleDragEnd, true);\n    window.addEventListener('touchend', this.handleDragEnd, true);\n    window.addEventListener('mousemove', this.handleDrag, true);\n  }\n  detachDragEndListener() {\n    window.removeEventListener('mouseup', this.handleDragEnd, true);\n    window.removeEventListener('touchend', this.handleDragEnd, true);\n    window.removeEventListener('mousemove', this.handleDrag, true);\n  }\n  handleSlideDrag(e) {\n    var {\n      slideMoveStartX,\n      startX,\n      endX,\n      scaleValues\n    } = this.state;\n    if (scaleValues == null) {\n      return;\n    }\n    var {\n      x,\n      width,\n      travellerWidth,\n      startIndex,\n      endIndex,\n      onChange,\n      data,\n      gap\n    } = this.props;\n    var delta = e.pageX - slideMoveStartX;\n    if (delta > 0) {\n      delta = Math.min(delta, x + width - travellerWidth - endX, x + width - travellerWidth - startX);\n    } else if (delta < 0) {\n      delta = Math.max(delta, x - startX, x - endX);\n    }\n    var newIndex = getIndex({\n      startX: startX + delta,\n      endX: endX + delta,\n      data,\n      gap,\n      scaleValues\n    });\n    if ((newIndex.startIndex !== startIndex || newIndex.endIndex !== endIndex) && onChange) {\n      onChange(newIndex);\n    }\n    this.setState({\n      startX: startX + delta,\n      endX: endX + delta,\n      slideMoveStartX: e.pageX\n    });\n  }\n  handleTravellerDragStart(id, e) {\n    var event = isTouch(e) ? e.changedTouches[0] : e;\n    if (event == null) {\n      return;\n    }\n    this.setState({\n      isSlideMoving: false,\n      isTravellerMoving: true,\n      movingTravellerId: id,\n      brushMoveStartX: event.pageX\n    });\n    this.attachDragEndListener();\n  }\n  handleTravellerMove(e) {\n    var {\n      brushMoveStartX,\n      movingTravellerId,\n      endX,\n      startX,\n      scaleValues\n    } = this.state;\n    if (movingTravellerId == null || scaleValues == null) {\n      return;\n    }\n    var prevValue = this.state[movingTravellerId];\n    var {\n      x,\n      width,\n      travellerWidth,\n      onChange,\n      gap,\n      data\n    } = this.props;\n    var params = {\n      startX: this.state.startX,\n      endX: this.state.endX,\n      data,\n      gap,\n      scaleValues\n    };\n    var delta = e.pageX - brushMoveStartX;\n    if (delta > 0) {\n      delta = Math.min(delta, x + width - travellerWidth - prevValue);\n    } else if (delta < 0) {\n      delta = Math.max(delta, x - prevValue);\n    }\n    params[movingTravellerId] = prevValue + delta;\n    var newIndex = getIndex(params);\n    var {\n      startIndex,\n      endIndex\n    } = newIndex;\n    var isFullGap = () => {\n      var lastIndex = data.length - 1;\n      if (movingTravellerId === 'startX' && (endX > startX ? startIndex % gap === 0 : endIndex % gap === 0) || endX < startX && endIndex === lastIndex || movingTravellerId === 'endX' && (endX > startX ? endIndex % gap === 0 : startIndex % gap === 0) || endX > startX && endIndex === lastIndex) {\n        return true;\n      }\n      return false;\n    };\n    this.setState(\n    // @ts-expect-error not sure why typescript is not happy with this, partial update is fine in React\n    {\n      [movingTravellerId]: prevValue + delta,\n      brushMoveStartX: e.pageX\n    }, () => {\n      if (onChange) {\n        if (isFullGap()) {\n          onChange(newIndex);\n        }\n      }\n    });\n  }\n  render() {\n    var {\n      data,\n      className,\n      children,\n      x,\n      y,\n      dy,\n      width,\n      height,\n      alwaysShowText,\n      fill,\n      stroke,\n      startIndex,\n      endIndex,\n      travellerWidth,\n      tickFormatter,\n      dataKey,\n      padding\n    } = this.props;\n    var {\n      startX,\n      endX,\n      isTextActive,\n      isSlideMoving,\n      isTravellerMoving,\n      isTravellerFocused\n    } = this.state;\n    if (!data || !data.length || !isNumber(x) || !isNumber(y) || !isNumber(width) || !isNumber(height) || width <= 0 || height <= 0) {\n      return null;\n    }\n    var layerClass = clsx('recharts-brush', className);\n    var style = generatePrefixStyle('userSelect', 'none');\n    var calculatedY = y + (dy !== null && dy !== void 0 ? dy : 0);\n    return /*#__PURE__*/React.createElement(Layer, {\n      className: layerClass,\n      onMouseLeave: this.handleLeaveWrapper,\n      onTouchMove: this.handleTouchMove,\n      style: style\n    }, /*#__PURE__*/React.createElement(Background, {\n      x: x,\n      y: calculatedY,\n      width: width,\n      height: height,\n      fill: fill,\n      stroke: stroke\n    }), /*#__PURE__*/React.createElement(PanoramaContextProvider, null, /*#__PURE__*/React.createElement(Panorama, {\n      x: x,\n      y: calculatedY,\n      width: width,\n      height: height,\n      data: data,\n      padding: padding\n    }, children)), /*#__PURE__*/React.createElement(Slide, {\n      y: calculatedY,\n      height: height,\n      stroke: stroke,\n      travellerWidth: travellerWidth,\n      startX: startX,\n      endX: endX,\n      onMouseEnter: this.handleEnterSlideOrTraveller,\n      onMouseLeave: this.handleLeaveSlideOrTraveller,\n      onMouseDown: this.handleSlideDragStart,\n      onTouchStart: this.handleSlideDragStart\n    }), /*#__PURE__*/React.createElement(TravellerLayer, {\n      travellerX: startX,\n      id: \"startX\",\n      otherProps: _objectSpread(_objectSpread({}, this.props), {}, {\n        y: calculatedY\n      }),\n      onMouseEnter: this.handleEnterSlideOrTraveller,\n      onMouseLeave: this.handleLeaveSlideOrTraveller,\n      onMouseDown: this.travellerDragStartHandlers.startX,\n      onTouchStart: this.travellerDragStartHandlers.startX,\n      onTravellerMoveKeyboard: this.handleTravellerMoveKeyboard,\n      onFocus: () => {\n        this.setState({\n          isTravellerFocused: true\n        });\n      },\n      onBlur: () => {\n        this.setState({\n          isTravellerFocused: false\n        });\n      }\n    }), /*#__PURE__*/React.createElement(TravellerLayer, {\n      travellerX: endX,\n      id: \"endX\",\n      otherProps: _objectSpread(_objectSpread({}, this.props), {}, {\n        y: calculatedY\n      }),\n      onMouseEnter: this.handleEnterSlideOrTraveller,\n      onMouseLeave: this.handleLeaveSlideOrTraveller,\n      onMouseDown: this.travellerDragStartHandlers.endX,\n      onTouchStart: this.travellerDragStartHandlers.endX,\n      onTravellerMoveKeyboard: this.handleTravellerMoveKeyboard,\n      onFocus: () => {\n        this.setState({\n          isTravellerFocused: true\n        });\n      },\n      onBlur: () => {\n        this.setState({\n          isTravellerFocused: false\n        });\n      }\n    }), (isTextActive || isSlideMoving || isTravellerMoving || isTravellerFocused || alwaysShowText) && /*#__PURE__*/React.createElement(BrushText, {\n      startIndex: startIndex,\n      endIndex: endIndex,\n      y: calculatedY,\n      height: height,\n      travellerWidth: travellerWidth,\n      stroke: stroke,\n      tickFormatter: tickFormatter,\n      dataKey: dataKey,\n      data: data,\n      startX: startX,\n      endX: endX\n    }));\n  }\n}\nfunction BrushInternal(props) {\n  var dispatch = useAppDispatch();\n  var chartData = useChartData();\n  var dataIndexes = useDataIndex();\n  var onChangeFromContext = useContext(BrushUpdateDispatchContext);\n  var onChangeFromProps = props.onChange;\n  var {\n    startIndex: startIndexFromProps,\n    endIndex: endIndexFromProps\n  } = props;\n  useEffect(() => {\n    // start and end index can be controlled from props, and we need them to stay up-to-date in the Redux state too\n    dispatch(setDataStartEndIndexes({\n      startIndex: startIndexFromProps,\n      endIndex: endIndexFromProps\n    }));\n  }, [dispatch, endIndexFromProps, startIndexFromProps]);\n  useBrushChartSynchronisation();\n  var onChange = useCallback(nextState => {\n    if (dataIndexes == null) {\n      return;\n    }\n    var {\n      startIndex,\n      endIndex\n    } = dataIndexes;\n    if (nextState.startIndex !== startIndex || nextState.endIndex !== endIndex) {\n      onChangeFromContext === null || onChangeFromContext === void 0 || onChangeFromContext(nextState);\n      onChangeFromProps === null || onChangeFromProps === void 0 || onChangeFromProps(nextState);\n      dispatch(setDataStartEndIndexes(nextState));\n    }\n  }, [onChangeFromProps, onChangeFromContext, dispatch, dataIndexes]);\n  var brushDimensions = useAppSelector(selectBrushDimensions);\n  if (brushDimensions == null || dataIndexes == null || chartData == null || !chartData.length) {\n    return null;\n  }\n  var {\n    startIndex,\n    endIndex\n  } = dataIndexes;\n  var {\n    x,\n    y,\n    width\n  } = brushDimensions;\n  var contextProperties = {\n    data: chartData,\n    x,\n    y,\n    width,\n    startIndex,\n    endIndex,\n    onChange\n  };\n  return /*#__PURE__*/React.createElement(BrushWithState, _extends({}, props, contextProperties, {\n    startIndexControlledFromProps: startIndexFromProps !== null && startIndexFromProps !== void 0 ? startIndexFromProps : undefined,\n    endIndexControlledFromProps: endIndexFromProps !== null && endIndexFromProps !== void 0 ? endIndexFromProps : undefined\n  }));\n}\nfunction BrushSettingsDispatcher(props) {\n  var dispatch = useAppDispatch();\n  useEffect(() => {\n    dispatch(setBrushSettings(props));\n    return () => {\n      dispatch(setBrushSettings(null));\n    };\n  }, [dispatch, props]);\n  return null;\n}\nexport var defaultBrushProps = {\n  height: 40,\n  travellerWidth: 5,\n  gap: 1,\n  fill: '#fff',\n  stroke: '#666',\n  padding: {\n    top: 1,\n    right: 1,\n    bottom: 1,\n    left: 1\n  },\n  leaveTimeOut: 1000,\n  alwaysShowText: false\n};\n\n/**\n * Renders a scrollbar that allows the user to zoom and pan in the chart along its XAxis.\n * It also allows you to render a small overview of the chart inside the brush that is always visible\n * and shows the full data set so that the user can see where they are zoomed in.\n *\n * If a chart is synchronized with other charts using the `syncId` prop on the chart,\n * the brush will also synchronize the zooming and panning between all synchronized charts.\n *\n * @see {@link https://recharts.github.io/en-US/examples/BrushBarChart/ BarChart with Brush}\n * @see {@link https://recharts.github.io/en-US/examples/SynchronizedLineChart/ Synchronized Brush}\n *\n * @consumes CartesianChartContext\n */\nexport function Brush(outsideProps) {\n  var props = resolveDefaultProps(outsideProps, defaultBrushProps);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(BrushSettingsDispatcher, {\n    height: props.height,\n    x: props.x,\n    y: props.y,\n    width: props.width,\n    padding: props.padding\n  }), /*#__PURE__*/React.createElement(BrushInternal, props));\n}\nBrush.displayName = 'Brush';"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}